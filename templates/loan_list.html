{% extends "layout.html" %} {% block title %}Loans list{% endblock %} {% block
head %} {{ super() }}
<style type="text/css">
    .important {
        color: #336699;
    }
</style>
<script src="{{ url_for('static', filename='loanApi.js') }}"></script>
{% endblock %} {% block content %}
<h1>Loans List</h1>

<!-- CRUD - Create -->
<form action="/loans" method="post">
    <label for="cust_id">Customer:</label><br />
    <select name="cust_id" id="cust_id" required>
        {% for customer in customers %}
        <option value="{{ customer[0] }}">{{ customer[1] }}</option>
        {% endfor %}</select
    ><br />
    <label for="book_id">Book:</label><br />
    <select name="book_id" id="book_id" required>
        {% for book in books %}
        <option value="{{ book[0] }}">{{ book[1] }}</option>
        {% endfor %}</select
    ><br />
    <input type="submit" value="Submit" />
</form>

<!-- CRUD - Read display all loans -->
<table>
    <thead>
        <tr>
            <th>Customer</th>
            <th>Book</th>
            <th>Loan Date</th>
            <th>Return Date</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for item in data %}
        <tr>
            <td>{{ item[1] }}</td>
            <td>{{ item[3] }}</td>
            <td>{{ item[4] }}</td>
            <td>{{ item[5] }}</td>
            <td>
                <button onclick="returnBook(`{{ item[0] }}`, `{{ item[2] }}`)">
                    Return
                </button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
